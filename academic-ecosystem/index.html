<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Ecosystem - National University of Management</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;700&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Global Theme and Styles (update paths for subdirectory) -->
    <script src="../js/theme.js"></script>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/i18n.css">
    
    <!-- Page-specific styles -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <style>
        .modal-open { overflow: hidden; }
        @keyframes blink { 50% { opacity: 0; } }
        #typewriter-heading::after {
          content: '|';
          display: inline-block;
          margin-left: 0.2rem;
          color: #0A0A3E; /* dark-blue */
          animation: blink 0.8s infinite step-end;
        }
        /* Reveal page content container once global init marks body as visible */
        body.is-visible #main-content-container { opacity: 1; }
    </style>
</head>

<body class="body-loading bg-light-lavender font-body">

    <!-- Header Loading Placeholder -->
    <div id="header-placeholder">
        <div id="header-loading-placeholder" class="fixed top-0 left-0 w-full bg-dark-blue z-[10000]">
            <div class="max-w-6xl mx-auto px-5 h-full flex items-center justify-center">
                <div class="animate-pulse">
                    <div class="w-12 h-12 bg-white/20 rounded-full mx-auto mb-2"></div>
                    <div class="h-2 bg-white/20 rounded w-20"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Page Content Container (hidden until header loads) -->
    <div id="main-content-container" class="opacity-0 transition-opacity duration-300">

    <main>
        <!-- Sections 1 and 2 -->
        <section class="bg-white pt-28 pb-16">
            <div class="max-w-6xl mx-auto px-5 text-center">
                <h1 class="text-4xl md:text-5xl font-heading text-dark-blue">Academic Ecosystem</h1>
                <p class="text-lg text-gray-700 font-body mt-4 max-w-3xl mx-auto">Learn about our commitment to research, innovation, and collaboration.</p>
            </div>
        </section>
        <section class="bg-light-lavender py-20">
            <div class="max-w-5xl mx-auto px-5 grid md:grid-cols-3 gap-10">
                <a href="research.html" class="block bg-white p-8 rounded-lg shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300">
                    <h2 class="text-2xl font-heading text-dark-blue">Research</h2><p class="mt-2 font-body text-gray-600">Driving discovery and creating impact.</p><span class="mt-4 inline-block text-dark-blue font-bold">Learn More →</span>
                </a>
                <a href="partners.html" class="block bg-white p-8 rounded-lg shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300">
                    <h2 class="text-2xl font-heading text-dark-blue">Partners</h2><p class="mt-2 font-body text-gray-600">Collaborating to provide real-world opportunities.</p><span class="mt-4 inline-block text-dark-blue font-bold">Learn More →</span>
                </a>
                <a href="innovation.html" class="block bg-white p-8 rounded-lg shadow-md hover:shadow-lg hover:-translate-y-1 transition-all duration-300">
                    <h2 class="text-2xl font-heading text-dark-blue">Innovation</h2><p class="mt-2 font-body text-gray-600">Fostering a culture of entrepreneurial thinking.</p><span class="mt-4 inline-block text-dark-blue font-bold">Learn More →</span>
                </a>
            </div>
        </section>

        <!-- Section 3: Key Centers -->
        <section class="bg-white py-20">
            <div class="max-w-6xl mx-auto px-5">
                <div class="text-center mb-16 h-12 flex items-center justify-center">
                    <h2 id="typewriter-heading" class="text-3xl font-heading text-dark-blue"></h2>
                </div>
                <div id="centers-container" class="flex flex-col gap-16 md:gap-24"></div>
            </div>
        </section>
    </main>

    </div>

    <div id="footer-placeholder"></div>

    <!-- Modal Popup Structure -->
    <div id="modal-container" class="fixed inset-0 bg-black/70 flex items-center justify-center p-4 z-50 transition-opacity duration-300 ease-out opacity-0 pointer-events-none">
        <div id="modal-box" class="bg-white rounded-2xl shadow-xl w-full max-w-3xl max-h-[90vh] flex flex-col md:flex-row transform transition-all duration-300 ease-out scale-95 opacity-0">
            <button id="modal-close-btn" class="absolute -top-3 -right-3 bg-white rounded-full p-2 shadow-lg text-dark-blue hover:bg-light-lavender z-10">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
            </button>
            <div class="w-full md:w-2/5 h-64 md:h-auto"><img id="modal-image" src="" alt="" class="w-full h-full object-cover rounded-t-2xl md:rounded-l-2xl md:rounded-tr-none"></div>
            <div class="w-full md:w-3/5 p-8 flex flex-col overflow-y-auto">
                <h3 id="modal-title" class="text-3xl font-heading font-bold text-red-600 mb-4"></h3>
                <p id="modal-description" class="font-body text-gray-700 leading-relaxed"></p>
            </div>
        </div>
    </div>
    
    <!-- Page-specific scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        // Data for centers (self-contained)
        const centersData = [
            { name: "Center of Excellence for R&D and Innovation (CERI)", description: "The National University of Management’s Center of Excellence for R&D and Innovation (CERI), previously NUM-Research Center, was established in 2013. It emerged from the university’s initiative to bridge academia and the business community,fostering collaboration. CERI also aims to promote research activities among faculty members and researchers worldwide, enhancing innovation and knowledge exchange. Motivated by the strong commitment of NUM management and staff, several development partners, including the World Bank, the Asian Development Bank, and the United Nations Development Program in Cambodia, have provided support for the implementation of various project activities under the center.", imageUrl: "image/ceri_logo.jpeg", imageAlt: "CERI Logo", imageType: "logo" },
            { name: "ASEAN Economic Research Institution (AERI)", description: "The National University of Management is proud to be chosen by the Ministry of Education, Youth, and Sports to establish an institute dedicated to supporting academic research. The institute will focus on economic issues and policy development, aligning with the goals of the ASEAN Economic Community (AEC) The establishment of the ASEAN Economic Research Institute confirms NUM’s commitment to enhance and encourage research among faculties in the area of economic strategy and policy. The initial impetus for this project comes from Cambodia taking the Chair of ASEAN in 2022 and it is expected that research will be initially driven by the theme and direction of Cambodia’s chairmanship in continuing the development of AEC in line with the ASEAN Charter.", imageUrl: "image/aeri_logo.jpeg", imageAlt: "AERI Logo", imageType: "logo" },
            { name: "Center for Digital Law", description: "The Center of Digital Law is located in the NUM’s Veal Sbov Campus and collaborate with other related faculties including School of Public Policy, Faculty of Law, Faculty of Digital Economy, Faculty of Information Technology, like-minded research centers as well as NUM School of Graduate Studies. The missions of the Center for Digital Law at NUM include (i) technology transfer support (acting as Technology Transfer Office-TTO);(ii) research and study on technology and digital laws; and (iii) legal training.", imageUrl: "image/digital_law.jpeg", imageAlt: "Center for Digital Law", imageType: "logo" },
            { name: "The CamboVerse Center", description: "The CamboVerse Center focuses on exploring and developing virtual and augmented reality experiences with a particular emphasis on Cambodian cultural and historical contexts. Such a center promotes the preservation and innovative dissemination of cultural heritage through modern technology, making it accessible to a global audience and future generations. By merging technology with cultural education, the CamboVerse Center hopes to foster a deeper global appreciation and understanding of Cambodian culture, history, and  contributions", imageUrl: "image/cambo.jpeg", imageAlt: "CamboVerse Center", imageType: "logo" },
            { name: "Administration and Student Services", description: "The Section for Administration and Student Services, located at the NUM Veal Sbov Campus, is dedicated to providing essential administrative and support functions that streamline student enrollment, monitor academic progress, and promote student welfare. This unit offers comprehensive guidance and counseling services addressing both academic and personal concerns, thereby enhancing the overall student experience and supporting their holistic development throughout their academic journey.", imageUrl: "image/service.jpg", imageAlt: "Administration and Student Services", imageType: "logo" },
            { name: "NUM Social Innovation Lab", description: "The NUM Social Innovation Lab is part of the EU-funded South-East Asian Social Innovation Network (SEASIN), with additional support provided by SMART Axiata. The Social Innovation Lab serves as a space for seminars and interactive workshops on social innovation and entrepreneurship. It also functions as an incubator to help develop and launch new social ventures", imageUrl: "image/num_social.png", imageAlt: "NUM Social Innovation Lab Logo", imageType: "logo" },
            { name: "NUM Career Center", description: "With the support of USAID Cambodia, the University of California Berkley (UCB), in collaboration with The Asia Foundation and the National University of Management, has launched the “Digital Career Development” project. This five-year project aims to enhance digital employment skills by strengthening the capacity of higher education institutions in Cambodia to receive international standard assessments, increase the number of scholarships, internships and relationship building opportunities to support the implementation of skills and employment opportunities for Cambodian youth. NUM as a partner of the project, commenced the Career Center supported by USAID", imageUrl: "image/num_career.jpeg", imageAlt: "NUM Career Center", imageType: "logo" },
            { name: "Digital Technology Center (DTC)", description: "The Digital Technology Center(DTC), donated by the Ministry of Post and Telecommunication, is dedicated to developing university research hub, corporate innovation facilities, training center,  and community tech hub, aiming to advance digital skills, technologies, and transformation across various sectors. The DTC provides essential infrastructure, expertise, training, and supports to promote digital innovation and inclusion.", imageUrl: "image/lap.jpg", imageAlt: "Digital Technology Center", imageType: "logo" },
            { name: "NUM Robotic Creative Lab", description: "Robotic Lab is established to support IT students with their mechanical practices and develop robotic competition. The competition also fosters student engagement in scientific and applied research.", imageUrl: "image/robotic.png", imageAlt: "NUM Robotic Creative Lab", imageType: "logo" }
        ];

        // Internal state for cleanup
        let _typewriterObserver = null;
        let _keydownHandler = null;
        let _centersClickHandler = null;
        let _modalClickHandler = null;

        function renderCenters() {
            const centersContainer = document.getElementById('centers-container');
            if (!centersContainer) return;
            centersContainer.innerHTML = centersData.map((center, index) => {
                const imageOrderClass = index % 2 !== 0 ? 'md:order-last' : '';
                const isLogo = center.imageType === 'logo';
                const wrapperClasses = isLogo
                    ? 'h-72 flex items-center justify-center bg-white p-10 border-2 border-red-500'
                    : 'h-80';
                const imageClasses = isLogo
                    ? 'object-contain max-h-56 w-auto'
                    : 'object-cover w-full h-full';
                return `
                    <div class="center-item grid grid-cols-1 md:grid-cols-5 items-center gap-8 md:gap-12 cursor-pointer group" data-id="${index}" data-aos="fade-up">
                        <div class="md:col-span-2 ${imageOrderClass}">
                            <div class="overflow-hidden rounded-xl shadow-lg ${wrapperClasses}">
                                <img src="${center.imageUrl}" alt="${center.imageAlt}"
                                     class="transform group-hover:scale-105 transition-transform duration-500 ease-out ${imageClasses}">
                            </div>
                        </div>
                        <div class="md:col-span-3">
                            <h3 class="text-2xl md:text-3xl font-heading font-bold text-red-600 mb-3 group-hover:text-dark-blue transition-colors duration-300">${center.name}</h3>
                            <p class="font-body text-gray-700 leading-relaxed mb-4">${center.description.substring(0, 220)}...</p>
                            <span class="font-bold text-dark-blue inline-block transition-transform group-hover:translate-x-1 duration-300">Read More →</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function openModal(center) {
            const modalContainer = document.getElementById('modal-container');
            const modalBox = document.getElementById('modal-box');
            if (!modalContainer || !modalBox) return;
            document.getElementById('modal-title').textContent = center.name;
            document.getElementById('modal-description').textContent = center.description;
            const modalImage = document.getElementById('modal-image');
            modalImage.src = center.imageUrl;
            modalImage.alt = center.imageAlt;
            modalImage.className = `w-full h-full rounded-t-2xl md:rounded-l-2xl md:rounded-tr-none ${center.imageType === 'logo' ? 'object-contain bg-white p-4 border border-gray-200' : 'object-cover'}`;
            document.body.classList.add('modal-open');
            modalContainer.classList.remove('pointer-events-none', 'opacity-0');
            modalBox.classList.remove('opacity-0', 'scale-95');
        }
        function closeModal() {
            const modalContainer = document.getElementById('modal-container');
            const modalBox = document.getElementById('modal-box');
            if (!modalContainer || !modalBox) return;
            document.body.classList.remove('modal-open');
            modalContainer.classList.add('pointer-events-none', 'opacity-0');
            modalBox.classList.add('opacity-0', 'scale-95');
        }

        function setupModalListeners() {
            const centersContainer = document.getElementById('centers-container');
            const modalContainer = document.getElementById('modal-container');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            if (!centersContainer || !modalContainer || !modalCloseBtn) return;

            _centersClickHandler = (e) => {
                const item = e.target.closest('.center-item');
                if (item) openModal(centersData[item.dataset.id]);
            };
            centersContainer.addEventListener('click', _centersClickHandler);

            modalCloseBtn.addEventListener('click', closeModal);

            _modalClickHandler = (e) => { if (e.target === modalContainer) closeModal(); };
            modalContainer.addEventListener('click', _modalClickHandler);

            _keydownHandler = (e) => { if (e.key === 'Escape') closeModal(); };
            document.addEventListener('keydown', _keydownHandler);
        }

        function setupTypewriter() {
            const el = document.getElementById('typewriter-heading');
            if (!el) return { stop: () => {} };
            const typewriter = {
                element: el,
                text: 'Key Centers and Institutions',
                typeSpeed: 75,
                deleteSpeed: 50,
                pauseDuration: 2000,
                textIndex: 0,
                isDeleting: false,
                timeoutId: null,
                loop: function () {
                    const currentText = this.text;
                    let currentSpeed = this.isDeleting ? this.deleteSpeed : this.typeSpeed;
                    if (this.isDeleting) {
                        this.element.textContent = currentText.substring(0, this.textIndex - 1);
                        this.textIndex--;
                    } else {
                        this.element.textContent = currentText.substring(0, this.textIndex + 1);
                        this.textIndex++;
                    }
                    if (!this.isDeleting && this.textIndex === currentText.length) {
                        currentSpeed = this.pauseDuration; this.isDeleting = true;
                    } else if (this.isDeleting && this.textIndex === 0) {
                        currentSpeed = this.pauseDuration; this.isDeleting = false;
                    }
                    this.timeoutId = setTimeout(() => this.loop(), currentSpeed);
                },
                start: function () { if (this.element && !this.timeoutId) this.loop(); },
                stop: function () { clearTimeout(this.timeoutId); this.timeoutId = null; }
            };
            _typewriterObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) typewriter.start(); else typewriter.stop(); });
            }, { threshold: 0.1 });
            _typewriterObserver.observe(el);
            return { stop: () => typewriter.stop() };
        }

        // SPA-compatible initializer
        function initializePage() {
            renderCenters();
            setupModalListeners();
            setupTypewriter();
            if (window.AOS) { AOS.init({ duration: 800, once: true, offset: 150 }); }
            // Safety reveal: ensure content becomes visible even if shell timing varies
            const container = document.getElementById('main-content-container');
            if (container && getComputedStyle(container).opacity === '0') {
                if (document.body.classList.contains('is-visible')) {
                    container.style.opacity = '1';
                } else {
                    // Fallback in case shell didn't run yet
                    requestAnimationFrame(() => { container.style.opacity = '1'; });
                }
            }
        }

        // Optional cleanup called by SPA before navigating away
        function pageCleanup() {
            const centersContainer = document.getElementById('centers-container');
            const modalContainer = document.getElementById('modal-container');
            const modalCloseBtn = document.getElementById('modal-close-btn');
            if (centersContainer && _centersClickHandler) centersContainer.removeEventListener('click', _centersClickHandler);
            if (modalContainer && _modalClickHandler) modalContainer.removeEventListener('click', _modalClickHandler);
            if (_keydownHandler) document.removeEventListener('keydown', _keydownHandler);
            if (_typewriterObserver) { try { _typewriterObserver.disconnect(); } catch(e){} _typewriterObserver = null; }
        }

        // Run on initial page load
        document.addEventListener('DOMContentLoaded', initializePage);
        // Expose for SPA
        window.initializePage = initializePage;
        window.pageCleanup = pageCleanup;
    </script>

    <!-- Global site scripts (SPA) -->
    <script src="../js/i18n.js"></script>
    <script src="../js/main.js" data-base-path=".."></script>
</body>
</html>